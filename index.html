Az al√°bbi f√°jlokat helyezd el **pontosan** ebben a strukt√∫r√°ban a GitHub repo-ban (pl. `molnartom1/FamilyHUB`).

> ‚ö†Ô∏è **Fontos (GitHub Pages)**: a repo neve alapj√°n a **BASE path** `/FamilyHUB/`. Ha √°tnevezed a rep√≥t, a `manifest.webmanifest` `start_url`/`scope` √©s a `sw.js`-ben sz√°molt BASE-t is friss√≠teni kell.

```
FamilyHUB/
‚îú‚îÄ index.html
‚îú‚îÄ app.js
‚îú‚îÄ sw.js
‚îú‚îÄ manifest.webmanifest
‚îú‚îÄ offline.html
‚îú‚îÄ 404.html
‚îî‚îÄ icons/
   ‚îú‚îÄ icon.svg
   ‚îî‚îÄ maskable.svg
```

---

## `index.html`

```html
<!doctype html>
<html lang="hu">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>FamilyHub ‚Ä¢ Napi K√∂r ‚Äî Csal√°di PWA</title>
  <meta name="description" content="Csal√°di ir√°ny√≠t√≥pult + k√∂z√∂s napt√°r, offline-first PWA, ICS import/export." />
  <link rel="manifest" href="./manifest.webmanifest">
  <link rel="icon" href="./icons/icon.svg" />
  <meta name="theme-color" content="#0b1020" />
  <style>
    :root{--bg:#0b1020;--card:#121a2f;--muted:#8aa1c0;--text:#e6eefb;--accent:#4cc9f0}
    *{box-sizing:border-box}
    html,body{height:100%}
    body{margin:0;font-family:system-ui,Segoe UI,Roboto,Arial;background:linear-gradient(180deg,#0b1020,#0e1530);color:var(--text)}
    .container{max-width:1100px;margin:0 auto;padding:16px}
    header{position:sticky;top:0;background:rgba(11,16,32,.8);backdrop-filter:blur(8px);border-bottom:1px solid #1f2a44;z-index:10}
    .brand{display:flex;align-items:center;gap:10px}
    .brand .logo{width:28px;height:28px}
    .brand h1{font-size:18px;margin:0}
    .row{display:flex;gap:16px;flex-wrap:wrap}
    .col{flex:1 1 300px}
    .card{background:linear-gradient(180deg,#121a2f,#0f182d);border:1px solid #1f2a44;border-radius:16px;padding:16px;box-shadow:0 2px 24px rgba(0,0,0,.25)}
    .muted{color:var(--muted)}
    button,.btn{background:linear-gradient(180deg,#1a2442,#152039);border:1px solid #2a3a62;color:var(--text);padding:10px 14px;border-radius:12px;cursor:pointer}
    input,select{width:100%;background:#0e1530;border:1px solid #243357;color:var(--text);padding:10px;border-radius:12px}
    .tabs{display:flex;gap:8px;flex-wrap:wrap;margin:12px 0}
    .tab{padding:10px 12px;border-radius:999px;background:#111a31;border:1px solid #25345a;cursor:pointer;color:#b7c6e3}
    .tab.active{background:linear-gradient(180deg,#182346,#141f3b);color:#fff;border-color:#4cc9f0}
    .pill{display:inline-flex;align-items:center;gap:6px;padding:6px 10px;border-radius:999px;background:#111a31;border:1px solid #25345a;color:#9fb2d6}
    .list{display:flex;flex-direction:column;gap:10px}
    .item{display:flex;align-items:center;gap:10px;background:#0f1730;border:1px solid #25345a;padding:10px;border-radius:12px}
    .item input[type=checkbox]{transform:scale(1.2)}
    .tag{padding:2px 8px;border-radius:999px;border:1px solid #334770;color:#c9defb;background:#0b142c;font-size:12px}
    .grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(240px,1fr));gap:12px}
    .footer{margin:24px 0;color:#7f93bb;font-size:12px;text-align:center}
    .inline{display:inline-flex;gap:8px;align-items:center}
    .hidden{display:none!important}
    .divider{height:1px;background:#22345f;margin:12px 0;border:0}
    .avatar{width:24px;height:24px;border-radius:50%;display:inline-block}
    .calendar{display:grid;grid-template-columns:repeat(7,1fr);gap:6px}
    .cal-cell{background:#0f1730;border:1px solid #25345a;border-radius:10px;padding:8px;min-height:80px}
    .cal-cell .d{font-size:12px;color:#93abd4}
    .cal-evt{margin-top:6px;font-size:12px;padding:4px 6px;border:1px solid #34568a;border-radius:8px;background:#0b142c}
    .toast{position:fixed;bottom:16px;right:16px;background:#0f1730;border:1px solid #27406b;padding:10px 14px;border-radius:12px;box-shadow:0 6px 24px rgba(0,0,0,.35)}
    .net{font-size:12px;padding:4px 8px;border-radius:999px;border:1px solid #2b3e67}
    .net.online{background:#0f2a2a;border-color:#1f5f5f;color:#b6fff2}
    .net.offline{background:#2a0f0f;border-color:#5f1f1f;color:#ffd6d6}
  </style>
</head>
<body>
<header>
  <div class="container" style="display:flex;align-items:center;justify-content:space-between;gap:12px;padding:10px 16px;">
    <div class="brand">
      <img class="logo" alt="logo" src="./icons/icon.svg" />
      <h1>FamilyHub ‚Ä¢ Napi K√∂r</h1>
    </div>
    <div class="inline">
      <span class="pill"><span id="familyNameLabel">Csal√°d</span></span>
      <span id="netBadge" class="net">ellen≈ërz√©s‚Ä¶</span>
      <button id="installBtn" class="btn">Telep√≠t√©s (PWA)</button>
      <button id="notifBtn" class="btn">√ârtes√≠t√©sek</button>
      <button id="exportBtn" class="btn">Export / Ment√©s</button>
    </div>
  </div>
</header>

<main class="container">
  <div class="card">
    <div class="tabs" id="tabs"></div>
    <div id="view-dashboard" class="view"></div>
    <div id="view-calendar" class="view hidden"></div>
    <div id="view-tasks" class="view hidden"></div>
    <div id="view-shopping" class="view hidden"></div>
    <div id="view-wall" class="view hidden"></div>
    <div id="view-settings" class="view hidden"></div>
  </div>
  <div class="footer">Offline-first PWA ‚Ä¢ ICS import/export ‚Ä¢ <span class="muted">GitHub Pages kompatibilis SW</span></div>
</main>

<!-- Templates -->
<template id="tpl-dashboard">
  <div class="row">
    <div class="col">
      <div class="card">
        <h3 style="margin:0 0 8px">Mai teend≈ëk</h3>
        <div id="dash-tasks"></div>
        <div class="divider"></div>
        <div class="inline" style="gap:8px">
          <input id="newTaskTitle" placeholder="√öj teend≈ë..." />
          <button id="addTaskBtn">Hozz√°ad√°s</button>
        </div>
      </div>
    </div>
    <div class="col">
      <div class="card">
        <h3 style="margin:0 0 8px">K√∂zelg≈ë esem√©nyek</h3>
        <div id="dash-events"></div>
        <div class="divider"></div>
        <div class="grid">
          <div>
            <label>C√≠m</label>
            <input id="evtTitle" placeholder="Pl. Orvos, sz√ºl≈ëi, edz√©s" />
          </div>
          <div>
            <label>D√°tum</label>
            <input id="evtDate" type="date" />
          </div>
          <div>
            <label>Kezd√©s</label>
            <input id="evtStart" type="time" />
          </div>
          <div>
            <label>V√©ge</label>
            <input id="evtEnd" type="time" />
          </div>
          <div>
            <label>Megjegyz√©s</label>
            <input id="evtNote" placeholder="Opci√≥" />
          </div>
          <div>
            <label>&nbsp;</label>
            <button id="addEvtBtn">Esem√©ny hozz√°ad√°sa</button>
          </div>
        </div>
      </div>
    </div>
  </div>
</template>

<template id="tpl-calendar">
  <div class="inline" style="justify-content:space-between;width:100%">
    <div class="inline">
      <button id="prevMonth">‚óÄ</button>
      <div class="pill" id="monthLabel">2025-10</div>
      <button id="nextMonth">‚ñ∂</button>
    </div>
    <div class="inline">
      <button id="icsExport">ICS export</button>
      <label class="btn" for="icsImportFile">ICS import</label>
      <input id="icsImportFile" type="file" accept=".ics,text/calendar" class="hidden" />
    </div>
  </div>
  <div class="calendar" id="calGrid"></div>
</template>

<template id="tpl-tasks">
  <div class="inline" style="justify-content:space-between;width:100%">
    <div class="pill">√ñsszes teend≈ë</div>
    <div class="inline">
      <select id="taskFilter">
        <option value="all">Mind</option>
        <option value="open">Nyitott</option>
        <option value="done">K√©sz</option>
      </select>
      <button id="clearDone">K√©sz elemek t√∂rl√©se</button>
    </div>
  </div>
  <div class="divider"></div>
  <div class="inline" style="gap:8px;margin-bottom:8px">
    <input id="taskTitle" placeholder="Teend≈ë c√≠me" />
    <select id="taskAssignee"></select>
    <button id="taskAdd">Hozz√°ad√°s</button>
  </div>
  <div id="taskList" class="list"></div>
</template>

<template id="tpl-shopping">
  <div class="inline" style="gap:8px;margin-bottom:8px">
    <input id="shopTitle" placeholder="T√©tel (pl. tej)" />
    <input id="shopQty" placeholder="Mennyis√©g (pl. 2)" style="max-width:120px" />
    <select id="shopCat">
      <option>√âlelmiszer</option>
      <option>H√°ztart√°s</option>
      <option>Gyerek</option>
      <option>Egy√©b</option>
    </select>
    <button id="shopAdd">Hozz√°ad√°s</button>
    <button id="shopClearBought">Megvett t√∂rl√©se</button>
  </div>
  <div id="shopList" class="list"></div>
</template>

<template id="tpl-wall">
  <div class="inline" style="gap:8px;margin-bottom:8px">
    <input id="wallMsg" placeholder="√úzenj a csal√°dnak..." />
    <button id="wallSend">K√ºld√©s</button>
  </div>
  <div id="wallFeed" class="list"></div>
</template>

<template id="tpl-settings">
  <div class="grid">
    <div class="card">
      <h3>Csal√°d be√°ll√≠t√°sok</h3>
      <label>Csal√°d neve</label>
      <input id="familyName" placeholder="Pl. Kov√°cs csal√°d" />
      <div class="divider"></div>
      <h4>Tagok</h4>
      <div id="members"></div>
      <div class="inline" style="gap:8px;margin-top:8px">
        <input id="memberName" placeholder="√öj csal√°dtag neve" />
        <input id="memberEmoji" placeholder="Emoji (pl. üòÄ)" style="max-width:120px" />
        <input id="memberColor" type="color" value="#4cc9f0"/>
        <button id="addMember">Hozz√°ad√°s</button>
      </div>
    </div>
    <div class="card">
      <h3>Diagnosztika & PWA</h3>
      <div class="inline" style="gap:8px;flex-wrap:wrap">
        <button id="btnTestSW">Service Worker teszt</button>
        <button id="btnSelfTestICS">ICS k√∂rteszt</button>
        <button id="btnUnregSW" class="btn">SW elt√°vol√≠t√°s</button>
        <button id="btnClearCaches" class="btn">Cache √ºr√≠t√©s</button>
        <button id="btnFactoryReset" class="btn">Gy√°ri vissza√°ll√≠t√°s</button>
      </div>
      <small class="muted">GitHub Pages-en a scope **/FamilyHUB/**. A `sw.js`-t a repo gy√∂ker√©be tedd.</small>
    </div>
  </div>
</template>

<div id="toast" class="toast hidden"></div>

<script src="./app.js" defer></script>
</body>
</html>
```

---

## `app.js`

> A kor√°bbi m≈±k√∂d≈ë logik√°t tartalmazza, modern szintaxis n√©lk√ºl (hogy t√∂bb b√∂ng√©sz≈ën fusson), √©s **nem** hoz l√©tre blob manifestet ‚Äì statikus `manifest.webmanifest`-et √©s `sw.js`-t haszn√°l.

```js
// --- Egyszer≈± hiba-overlay, hogy ne maradjon √ºres az oldal ---
(function(){
  function showOverlay(msg){
    var o=document.getElementById('fatal');
    if(!o){o=document.createElement('div');o.id='fatal';o.style.cssText='position:fixed;inset:0;background:rgba(10,0,25,.9);color:#fff;z-index:99999;padding:20px;overflow:auto;font:14px/1.4 system-ui';document.body.appendChild(o);}
    o.innerHTML='<h2>Hiba a bet√∂lt√©skor</h2><pre style="white-space:pre-wrap">'+msg+'</pre><button onclick="this.parentNode.remove()" style="margin-top:10px;padding:8px 12px;border-radius:8px;border:1px solid #34568a;background:#152039;color:#fff">Bez√°r</button>';
  }
  window.addEventListener('error', function(e){ showOverlay(e.message+'\n'+(e.filename||'')+':'+(e.lineno||'')); });
  window.addEventListener('unhandledrejection', function(e){ showOverlay('Unhandled: '+ (e.reason&&e.reason.stack||e.reason||'ismeretlen')); });
  window.__FHUB_DEBUG_OVERLAY__=showOverlay;
})();

var App = (function(){
  var state = {
    family: { id:'family-001', name:'Csal√°d', members:[
      { id:'m1', name:'Anya', emoji:'üë©', color:'#ff5d6c' },
      { id:'m2', name:'Apa',  emoji:'üë®', color:'#4cc9f0' }
    ]},
    tasks: [], shopping: [], wall: [], events: [], monthOffset: 0
  };

  function $(s){ return document.querySelector(s); }
  function el(tag, attrs, children){ attrs=attrs||{}; children=children||[]; var n=document.createElement(tag);
    Object.keys(attrs).forEach(function(k){ var v=attrs[k]; if(k==='class') n.className=v; else if(k==='html') n.innerHTML=v; else if(k.indexOf('on')===0) n.addEventListener(k.slice(2), v); else n.setAttribute(k,v); });
    children.forEach(function(c){ n.append(c); }); return n; }
  function genId(pfx){ pfx=pfx||'id'; return pfx+Math.random().toString(36).slice(2,9); }
  function toast(msg){ var t=$('#toast'); if(!t) return; t.textContent=msg; t.classList.remove('hidden'); setTimeout(function(){ t.classList.add('hidden'); }, 2400); }
  function save(){ try{ localStorage.setItem('familyhub.data', JSON.stringify(state)); }catch(e){} }
  function load(){ try{ var raw=localStorage.getItem('familyhub.data'); if(raw){ var obj=JSON.parse(raw); Object.assign(state, obj); } }catch(e){ console.warn('Load failed', e); } }

  function updateNet(){ var b=$('#netBadge'); if(!b) return; if(navigator.onLine){ b.textContent='online'; b.classList.add('online'); b.classList.remove('offline'); } else { b.textContent='offline'; b.classList.add('offline'); b.classList.remove('online'); } }
  addEventListener('online', updateNet); addEventListener('offline', updateNet);

  function ensureNotifications(){ if(!('Notification' in window)) { toast('Nincs √©rtes√≠t√©s t√°mogat√°s.'); return Promise.resolve(false); } try{ if(Notification.permission==='granted') return Promise.resolve(true); return Notification.requestPermission().then(function(p){ return p==='granted'; }); }catch(e){ return Promise.resolve(false); } }
  function notifyLocal(title, body){ try{ if('Notification' in window && Notification.permission==='granted') new Notification(title, { body: body }); }catch(e){} toast(body); try{ if(navigator.serviceWorker && navigator.serviceWorker.controller){ navigator.serviceWorker.controller.postMessage({type:'notify', title:title, body:body}); } }catch(e){} }

  var tabs=[{id:'dashboard',name:'Ir√°ny√≠t√≥pult'},{id:'calendar',name:'Napt√°r'},{id:'tasks',name:'Teend≈ëk'},{id:'shopping',name:'Bev√°s√°rl√≥'},{id:'wall',name:'√úzen≈ëfal'},{id:'settings',name:'Be√°ll√≠t√°sok'}];
  function renderTabs(active){ active=active||'dashboard'; var wrap=$('#tabs'); if(!wrap) return; wrap.innerHTML=''; tabs.forEach(function(t){ wrap.append(el('button',{class:'tab'+(t.id===active?' active':''),onclick:function(){switchView(t.id);}},[t.name])); }); }
  function switchView(view){ Array.prototype.forEach.call(document.querySelectorAll('.view'), function(v){ v.classList.add('hidden'); }); var tgt=$('#view-'+view); if(tgt) tgt.classList.remove('hidden'); renderTabs(view); var map={dashboard:renderDashboard,calendar:renderCalendar,tasks:renderTasks,shopping:renderShopping,wall:renderWall,settings:renderSettings}; if(map[view]) map[view](); }

  function memberPill(mid){ var m=state.family.members.find(function(x){return x.id===mid;}); return m? '<span class="tag" style="border-color:'+m.color+';">'+(m.emoji||'üë§')+' '+m.name+'</span>':'<span class="tag">Ismeretlen</span>'; }
  function renderDashboard(){ var root=$('#view-dashboard'); if(!root) return; root.innerHTML=$('#tpl-dashboard').innerHTML; var open=state.tasks.filter(function(t){return !t.done;}).slice(0,5); var list=el('div',{class:'list'}); open.forEach(function(t){ var it=el('div',{class:'item'}); var chk=el('input',{type:'checkbox',onchange:function(){t.done=true; save(); renderDashboard(); notifyLocal('Teend≈ë k√©sz',t.title);}}); var meta=el('div',{},[el('div',{html:'<strong>'+t.title+'</strong>'}), el('div',{class:'muted',html:memberPill(t.assignee)+' ‚Ä¢ '+new Date(t.created).toLocaleString()})]); it.append(chk,meta); list.append(it); }); var anchor=document.getElementById('dash-tasks'); if(anchor) anchor.replaceWith(list);
    var now=new Date(); var in7=new Date(now.getTime()+7*86400000); var up=state.events.filter(function(e){return new Date(e.start)<=in7 && new Date(e.end||e.start)>=now;}).sort(function(a,b){return new Date(a.start)-new Date(b.start);}).slice(0,5); var evWrap=el('div',{class:'list'}); up.forEach(function(e){ var it=el('div',{class:'item'}); it.append(el('div',{class:'tag',html:new Date(e.start).toLocaleString()}), el('div',{html:'<strong>'+e.title+'</strong> <span class="muted">'+(e.note? '‚Ä¢ '+e.note:'')+'</span>'})); evWrap.append(it); }); var evAnchor=document.getElementById('dash-events'); if(evAnchor) evAnchor.replaceWith(evWrap);
    document.getElementById('addTaskBtn').onclick=function(){ var v=document.getElementById('newTaskTitle').value.trim(); if(!v) return; var a=state.family.members[0]? state.family.members[0].id : null; state.tasks.unshift({id:genId('t'), title:v, assignee:a, done:false, created:Date.now()}); save(); renderDashboard(); notifyLocal('√öj teend≈ë',v); document.getElementById('newTaskTitle').value=''; };
    document.getElementById('addEvtBtn').onclick=function(){ var title=document.getElementById('evtTitle').value.trim(); var date=document.getElementById('evtDate').value; var s=document.getElementById('evtStart').value; var e=document.getElementById('evtEnd').value; var note=document.getElementById('evtNote').value.trim(); if(!title||!date){ toast('C√≠m √©s d√°tum k√∂telez≈ë'); return; } var start=new Date(date+'T'+(s||'09:00')+':00'); var end=new Date(date+'T'+(e||s||'10:00')+':00'); state.events.push({id:genId('e'),title:title,start:start,end:end,note:note}); save(); renderDashboard(); notifyLocal('√öj esem√©ny', title+' ‚Ä¢ '+start.toLocaleString()); document.getElementById('evtTitle').value=''; document.getElementById('evtNote').value=''; };
  }

  function monthStart(o){ var d=new Date(); d.setDate(1); d.setMonth(d.getMonth()+o); return d; }
  function daysInMonth(d){ return new Date(d.getFullYear(), d.getMonth()+1, 0).getDate(); }
  function renderCalendar(){ var root=$('#view-calendar'); if(!root) return; root.innerHTML=$('#tpl-calendar').innerHTML; var base=monthStart(state.monthOffset); var y=base.getFullYear(), m=base.getMonth(); document.getElementById('monthLabel').textContent=base.toLocaleString('hu-HU',{month:'long',year:'numeric'}); var grid=document.getElementById('calGrid'); grid.innerHTML=''; var first=(new Date(y,m,1).getDay()||7)-1; for(var i=0;i<first;i++) grid.append(el('div',{class:'cal-cell muted'})); var days=daysInMonth(base); for(var d=1; d<=days; d++){ var cell=el('div',{class:'cal-cell'}); var dt=new Date(y,m,d); cell.append(el('div',{class:'d',html:dt.toLocaleDateString('hu-HU',{weekday:'short'})+' ‚Ä¢ '+d})); var todays=state.events.filter(function(e){return new Date(e.start).toDateString()===dt.toDateString();}); todays.forEach(function(ev){ cell.append(el('div',{class:'cal-evt', html:'<strong>'+ev.title+'</strong><br/><span class="muted">'+new Date(ev.start).toLocaleTimeString([], {hour:'2-digit', minute:'2-digit'})+(ev.end?'‚Äì'+new Date(ev.end).toLocaleTimeString([], {hour:'2-digit', minute:'2-digit'}):'')+'</span>'})); }); grid.append(cell); }
    document.getElementById('prevMonth').onclick=function(){state.monthOffset--; renderCalendar();};
    document.getElementById('nextMonth').onclick=function(){state.monthOffset++; renderCalendar();};
    document.getElementById('icsExport').onclick=exportICS;
    document.getElementById('icsImportFile').addEventListener('change', importICS);
  }

  function exportICS(){ var lines=['BEGIN:VCALENDAR','VERSION:2.0','PRODID:-//FamilyHub//HU//']; state.events.forEach(function(e){ lines.push('BEGIN:VEVENT'); lines.push('UID:'+e.id+'@familyhub'); var dt=function(d){ return new Date(d).toISOString().replace(/[-:]/g,'').replace(/\.\d{3}Z/,'Z'); }; lines.push('DTSTART:'+dt(e.start)); if(e.end) lines.push('DTEND:'+dt(e.end)); lines.push('SUMMARY:'+(e.title||'')); if(e.note) lines.push('DESCRIPTION:'+(e.note)); lines.push('END:VEVENT'); }); lines.push('END:VCALENDAR'); var blob=new Blob([lines.join('\n')],{type:'text/calendar'}); el('a',{href:URL.createObjectURL(blob),download:'familyhub.ics'}).click(); }
  function importICS(ev){ var f=ev.target.files[0]; if(!f) return; f.text().then(function(text){ var items=[]; var cur=null; text.split(/\r?\n/).forEach(function(line){ if(line==='BEGIN:VEVENT'){ cur={}; } else if(line==='END:VEVENT'){ if(cur&&cur.title&&cur.start) items.push(cur); cur=null; } else if(cur){ if(line.indexOf('SUMMARY:')===0) cur.title=line.slice(8); else if(line.indexOf('DTSTART:')===0) cur.start=icsToDate(line.slice(8)); else if(line.indexOf('DTEND:')===0) cur.end=icsToDate(line.slice(6)); else if(line.indexOf('DESCRIPTION:')===0) cur.note=line.slice(12); } }); items.forEach(function(e){ state.events.push({id:genId('e'), title:e.title, start:e.start, end:e.end, note:e.note}); }); save(); renderCalendar(); notifyLocal('ICS import k√©sz', items.length+' esem√©ny hozz√°adva'); ev.target.value=''; });
    function icsToDate(s){ var m=/^(\d{4})(\d{2})(\d{2})T(\d{2})(\d{2})(\d{2})Z$/.exec(s); return m? new Date(Date.UTC(+m[1],+m[2]-1,+m[3],+m[4],+m[5],+m[6])):new Date(s); }
  }

  function renderTasks(){ var root=$('#view-tasks'); if(!root) return; root.innerHTML=$('#tpl-tasks').innerHTML; var sel=document.getElementById('taskAssignee'); sel.innerHTML=''; state.family.members.forEach(function(m){ sel.append(el('option',{value:m.id},[m.name])); }); function draw(){ var f=document.getElementById('taskFilter').value; var wrap=document.getElementById('taskList'); wrap.innerHTML=''; state.tasks.filter(function(t){ return f==='all'||(f==='open'&&!t.done)||(f==='done'&&t.done); }).forEach(function(t){ var it=el('div',{class:'item'}); var chk=el('input',{type:'checkbox'}); chk.checked=t.done; chk.onchange=function(){ t.done=chk.checked; save(); draw(); }; var meta=el('div',{},[el('div',{html:'<strong>'+t.title+'</strong> '+memberPill(t.assignee)}), el('div',{class:'muted',html:new Date(t.created).toLocaleString()})]); var del=el('button',{onclick:function(){ state.tasks=state.tasks.filter(function(x){return x.id!==t.id;}); save(); draw(); }},['T√∂rl√©s']); it.append(chk,meta,del); wrap.append(it); }); } draw(); document.getElementById('taskAdd').onclick=function(){ var title=document.getElementById('taskTitle').value.trim(); if(!title) return; var a=document.getElementById('taskAssignee').value; state.tasks.unshift({id:genId('t'), title:title, assignee:a, done:false, created:Date.now()}); save(); draw(); notifyLocal('√öj teend≈ë', title); document.getElementById('taskTitle').value=''; }; document.getElementById('taskFilter').onchange=draw; document.getElementById('clearDone').onclick=function(){ state.tasks=state.tasks.filter(function(t){return !t.done;}); save(); draw(); } }

  function renderShopping(){ var root=$('#view-shopping'); if(!root) return; root.innerHTML=$('#tpl-shopping').innerHTML; function draw(){ var wrap=document.getElementById('shopList'); wrap.innerHTML=''; state.shopping.forEach(function(itm){ var it=el('div',{class:'item'}); var chk=el('input',{type:'checkbox'}); chk.checked=!!itm.bought; chk.onchange=function(){ itm.bought=chk.checked; save(); draw(); }; var meta=el('div',{},[ el('div',{html:'<strong>'+itm.title+'</strong> <span class="muted">'+(itm.qty||'')+' '+(itm.cat? '‚Ä¢ '+itm.cat:'')+'</span>'}), el('div',{class:'muted', html:memberPill(itm.by)+' ‚Ä¢ '+new Date(itm.created).toLocaleString()}) ]); var del=el('button',{onclick:function(){ state.shopping=state.shopping.filter(function(x){return x.id!==itm.id;}); save(); draw(); }},['T√∂rl√©s']); it.append(chk,meta,del); wrap.append(it); }); } draw(); document.getElementById('shopAdd').onclick=function(){ var title=document.getElementById('shopTitle').value.trim(); if(!title) return; var qty=document.getElementById('shopQty').value.trim(); var cat=document.getElementById('shopCat').value; var by=state.family.members[0]? state.family.members[0].id : null; state.shopping.unshift({id:genId('s'), title:title, qty:qty, cat:cat, by:by, created:Date.now()}); save(); draw(); notifyLocal('Bev√°s√°rl√≥lista', title+(qty?' √ó '+qty:'')); document.getElementById('shopTitle').value=''; document.getElementById('shopQty').value=''; }; document.getElementById('shopClearBought').onclick=function(){ state.shopping=state.shopping.filter(function(i){return !i.bought;}); save(); draw(); } }

  function renderWall(){ var root=$('#view-wall'); if(!root) return; root.innerHTML=$('#tpl-wall').innerHTML; function draw(){ var wrap=document.getElementById('wallFeed'); wrap.innerHTML=''; state.wall.slice(0,100).forEach(function(w){ var it=el('div',{class:'item'}); var found=state.family.members.find(function(m){return m.id===w.by;})||{}; var color=found.color||'#333'; var name=found.name||'Ismeretlen'; it.append( el('div',{class:'avatar',style:'background:'+color}), el('div',{},[ el('div',{html:'<strong>'+name+'</strong> <span class="muted">'+new Date(w.at).toLocaleString()+'</span>'}), el('div',{html:w.text}) ]) ); wrap.append(it); }); } draw(); document.getElementById('wallSend').onclick=function(){ var text=document.getElementById('wallMsg').value.trim(); if(!text) return; var by=state.family.members[0]? state.family.members[0].id : null; state.wall.unshift({id:genId('w'), text:text, by:by, at:Date.now()}); save(); draw(); notifyLocal('√öj √ºzenet', text); document.getElementById('wallMsg').value=''; } }

  function renderSettings(){ var root=$('#view-settings'); if(!root) return; root.innerHTML=$('#tpl-settings').innerHTML; document.getElementById('familyName').value=state.family.name||''; document.getElementById('familyName').oninput=function(e){ state.family.name=e.target.value; document.getElementById('familyNameLabel').textContent=state.family.name||'Csal√°d'; save(); }; var list=document.getElementById('members'); list.innerHTML=''; state.family.members.forEach(function(m){ var row=el('div',{class:'item'},[ el('span',{class:'avatar',style:'background:'+m.color}), el('div',{},[el('div',{html:'<strong>'+m.name+'</strong> <span class="muted">'+(m.emoji||'')+'</span>'})]), el('button',{onclick:function(){ state.tasks.forEach(function(t){ if(t.assignee===m.id) t.assignee=state.family.members[0]? state.family.members[0].id : null; }); state.family.members=state.family.members.filter(function(x){return x.id!==m.id;}); save(); renderSettings(); }},['Elt√°vol√≠t√°s']) ]); list.append(row); });
    document.getElementById('btnTestSW').onclick=testSW;
    document.getElementById('btnSelfTestICS').onclick=selfTestICS;
    document.getElementById('btnUnregSW').onclick=unregisterAllSW;
    document.getElementById('btnClearCaches').onclick=clearAllCaches;
    document.getElementById('btnFactoryReset').onclick=function(){ unregisterAllSW().then(function(){ return clearAllCaches(); }).then(function(){ localStorage.removeItem('familyhub.data'); toast('Gy√°ri vissza√°ll√≠t√°s k√©sz. Friss√≠t√©s‚Ä¶'); setTimeout(function(){ location.reload(); },600); }); };
  }

  function testSW(){ if(!('serviceWorker' in navigator)) { toast('Nincs SW t√°mogat√°s.'); return; } navigator.serviceWorker.getRegistrations().then(function(regs){ if(!regs.length){ toast('Nem tal√°lhat√≥ SW regisztr√°ci√≥.'); return; } toast('SW scope: '+regs.map(function(r){return r.scope;}).join(', ')); }); }
  function unregisterAllSW(){ if(!('serviceWorker' in navigator)) return Promise.resolve(); return navigator.serviceWorker.getRegistrations().then(function(regs){ return Promise.all(regs.map(function(r){return r.unregister();})); }).then(function(){ toast('SW elt√°vol√≠tva'); }); }
  function clearAllCaches(){ return caches.keys().then(function(keys){ return Promise.all(keys.map(function(k){return caches.delete(k);})); }).then(function(){ toast('Cache √ºr√≠tve'); }); }
  function selfTestICS(){ var tmp={ id:genId('e'), title:'[TESZT] ICS', start:new Date(), end:new Date(Date.now()+3600000), note:'diagnosztika' }; var backup=state.events.slice(); state.events.push(tmp); var lines=['BEGIN:VEVENT','UID:'+tmp.id+'@familyhub','DTSTART:'+new Date(tmp.start).toISOString(),'DTEND:'+new Date(tmp.end).toISOString(),'SUMMARY:'+tmp.title,'DESCRIPTION:'+tmp.note,'END:VEVENT']; var ok=lines.join('\n').indexOf('DTSTART:')>0; state.events=backup; toast(ok?'ICS √∂n-teszt: OK':'ICS √∂n-teszt: HIBA'); }

  var deferredPrompt=null; addEventListener('beforeinstallprompt', function(e){ e.preventDefault(); deferredPrompt=e; var b=document.getElementById('installBtn'); if(b) b.disabled=false; });
  function bindHeader(){ var b=document.getElementById('installBtn'); if(b) b.onclick=function(){ if(!deferredPrompt){ toast('M√°r telep√≠tve lehet vagy m√©g nem el√©rhet≈ë.'); return; } deferredPrompt.prompt(); }; var nb=document.getElementById('notifBtn'); if(nb) nb.addEventListener('click', ensureNotifications); var ex=document.getElementById('exportBtn'); if(ex) ex.addEventListener('click', exportAll); document.getElementById('familyNameLabel').textContent=state.family.name||'Csal√°d'; updateNet(); }
  function exportAll(){ var blob=new Blob([JSON.stringify(state,null,2)],{type:'application/json'}); el('a',{href:URL.createObjectURL(blob), download:'FamilyHub_backup_'+new Date().toISOString().slice(0,10)+'.json'}).click(); }

  function registerSW(){ if(!('serviceWorker' in navigator)) return; var BASE='/FamilyHUB/'; // <-- GitHub Pages repo √∫tvonala
    var swURL=new URL('sw.js', location.origin+BASE).toString();
    navigator.serviceWorker.register(swURL, { scope: BASE }).then(function(reg){ console.log('SW reg OK:', reg.scope); }).catch(function(err){ console.error('SW reg error', err); toast('SW reg hiba: hi√°nyzik a sw.js a '+BASE+' alatt?'); });
  }

  function init(){ load(); bindHeader(); renderTabs('dashboard'); switchView('dashboard'); registerSW(); }
  return { init: init };
})();

document.addEventListener('DOMContentLoaded', function(){ try{ App.init(); }catch(e){ console.error(e); window.__FHUB_DEBUG_OVERLAY__ && window.__FHUB_DEBUG_OVERLAY__(e.stack||e.message); } });
```

---

## `sw.js`

> Cache-first app shell + offline fallback. A **BASE** a SW scope-j√°b√≥l sz√°mol√≥dik, √≠gy repo-√°tnevez√©skor nem kell k√≥dot m√≥dos√≠tani.

```js
const CACHE = 'familyhub-v6';
const SCOPE_URL = new URL(self.registration.scope);
let BASE = SCOPE_URL.pathname; // pl. "/FamilyHUB/"
if(!BASE.endsWith('/')) BASE += '/';

self.addEventListener('install', (e) => {
  self.skipWaiting();
  e.waitUntil(
    caches.open(CACHE).then((c) => c.addAll([
      BASE,
      BASE + 'index.html',
      BASE + 'app.js',
      BASE + 'offline.html',
      BASE + 'icons/icon.svg',
      BASE + 'icons/maskable.svg',
      BASE + 'manifest.webmanifest',
    ]).catch(()=>{}))
  );
});

self.addEventListener('activate', (e) => {
  self.clients.claim();
  e.waitUntil(
    caches.keys().then((keys) => Promise.all(keys.filter((k) => k !== CACHE).map((k) => caches.delete(k))))
  );
});

self.addEventListener('fetch', (e) => {
  const req = e.request;
  if (req.mode === 'navigate') {
    e.respondWith((async () => {
      try {
        const net = await fetch(req);
        if(!net.ok) throw new Error('HTTP '+net.status);
        const copy = net.clone();
        caches.open(CACHE).then((c) => c.put(req, copy));
        return net;
      } catch (err) {
        const cached = await caches.match(req) || await caches.match(BASE) || await caches.match(BASE + 'index.html') || await caches.match(BASE + 'offline.html');
        if (cached) return cached;
        return Response.redirect(BASE + 'offline.html', 302);
      }
    })());
    return;
  }
  e.respondWith(
    caches.match(req).then((r) => r || fetch(req).then((res) => { const copy=res.clone(); caches.open(CACHE).then(c=>c.put(req, copy)); return res; }))
  );
});

self.addEventListener('message', (e) => {
  if (e.data && e.data.type === 'notify' && self.registration.showNotification) {
    self.registration.showNotification(e.data.title || 'FamilyHub', { body: e.data.body || '' });
  }
});
```

---

## `manifest.webmanifest`

```json
{
  "name": "FamilyHub ‚Ä¢ Napi K√∂r",
  "short_name": "FamilyHub",
  "start_url": "/FamilyHUB/",
  "scope": "/FamilyHUB/",
  "display": "standalone",
  "background_color": "#0b1020",
  "theme_color": "#0b1020",
  "icons": [
    { "src": "icons/icon.svg", "sizes": "any", "type": "image/svg+xml", "purpose": "any" },
    { "src": "icons/maskable.svg", "sizes": "any", "type": "image/svg+xml", "purpose": "maskable" }
  ]
}
```

> Ha PNG ikonokat szeretn√©l (egyes eszk√∂z√∂k√∂n szebbek), tedd be m√©g:
>
> ```json
> { "src": "icons/icon-192.png", "sizes": "192x192", "type": "image/png", "purpose": "any" },
> { "src": "icons/icon-512.png", "sizes": "512x512", "type": "image/png", "purpose": "any" }
> ```

---

## `offline.html`

```html
<!doctype html>
<html lang="hu">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Offline ‚Ä¢ FamilyHub</title>
  <meta name="theme-color" content="#0b1020" />
  <style>
    body{margin:0;font-family:system-ui,Segoe UI,Roboto;background:#0b1020;color:#e6eefb;display:grid;place-items:center;height:100vh}
    .box{max-width:560px;padding:24px;border:1px solid #27406b;border-radius:16px;background:#0f1730;box-shadow:0 10px 40px rgba(0,0,0,.35)}
    h1{margin:0 0 8px} p{color:#9fb2d6}
    button{padding:10px 14px;border-radius:12px;border:1px solid #2a3a62;background:#152039;color:#fff;cursor:pointer}
  </style>
</head>
<body>
  <div class="box">
    <h1>Offline m√≥d</h1>
    <p>√ögy t≈±nik, nincs h√°l√≥zati kapcsolat √©s ez az oldal m√©g nincs a gyors√≠t√≥t√°rban.</p>
    <div style="display:flex;gap:8px;margin-top:12px">
      <button onclick="location.reload()">Pr√≥b√°ld √∫jra</button>
      <button onclick="location.href='.'">Kezd≈ëlap</button>
    </div>
  </div>
</body>
</html>
```

---

## `404.html`

> GitHub Pages-hez √©rdemes: ha k√©s≈ëbb lesz routing, a 404-b≈ël visszair√°ny√≠t a gy√∂k√©rre.

```html
<!doctype html>
<meta charset="utf-8">
<title>Bet√∂lt√©s‚Ä¶</title>
<script>
  (function(){
    var base = '/FamilyHUB/';
    location.replace(base);
  })();
</script>
```

---

## `icons/icon.svg`

```svg
<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 128 128">
  <defs>
    <linearGradient id="g" x1="0" x2="0" y1="0" y2="1">
      <stop offset="0%" stop-color="#4cc9f0"/>
      <stop offset="100%" stop-color="#b5179e"/>
    </linearGradient>
  </defs>
  <rect rx="30" width="128" height="128" fill="url(#g)"/>
  <circle cx="43" cy="54" r="10" fill="white"/>
  <circle cx="85" cy="54" r="10" fill="white"/>
  <path d="M30 80c10-18 58-18 68 0-6 22-62 22-68 0z" fill="white"/>
</svg>
```

## `icons/maskable.svg`

```svg
<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 128 128">
  <defs>
    <linearGradient id="g" x1="0" x2="0" y1="0" y2="1">
      <stop offset="0%" stop-color="#4cc9f0"/>
      <stop offset="100%" stop-color="#b5179e"/>
    </linearGradient>
    <mask id="m"><rect rx="28" width="128" height="128" fill="#fff"/></mask>
  </defs>
  <rect width="128" height="128" fill="url(#g)" mask="url(#m)"/>
  <circle cx="43" cy="54" r="10" fill="white"/>
  <circle cx="85" cy="54" r="10" fill="white"/>
  <path d="M30 80c10-18 58-18 68 0-6 22-62 22-68 0z" fill="white"/>
</svg>
```

---

### Gyors ellen≈ërz≈ë lista

* [ ] F√°jlok felt√∂ltve pontos √∫tvonalakon
* [ ] `manifest.webmanifest` `start_url` √©s `scope` ‚Üí `/FamilyHUB/`
* [ ] `index.html` bet√∂lti a `./app.js`-t √©s a manifestet
* [ ] `sw.js` a repo gy√∂ker√©ben; els≈ë bet√∂lt√©s ut√°n **Reload** a friss SW-hez
* [ ] Ha gond van: Be√°ll√≠t√°sok ‚Üí **SW elt√°vol√≠t√°s** + **Cache √ºr√≠t√©s** ‚Üí Reload

Ha szeretn√©d, adok k√ºl√∂n **PNG ikonokat** is (192/512) base64-ben, vagy k√©sz√≠tek egy kis scriptet, ami az SVG-b≈ël gener√°lja ≈ëket build sor√°n.
